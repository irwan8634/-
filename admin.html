<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Kirim Pesan Anonim</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

    <!-- CSS -->
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background: linear-gradient(to right, #f6d365, #fda085);
        padding: 30px 20px;
        color: #333;
      }
      h2,
      h3 {
        text-align: center;
        margin-bottom: 20px;
      }
      input,
      textarea {
        width: 100%;
        max-width: 600px;
        margin: 10px auto;
        display: block;
        padding: 12px;
        font-size: 16px;
        border: 2px solid #ddd;
        border-radius: 10px;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      }
      button {
        display: block;
        margin: 15px auto;
        background-color: #ff7e5f;
        color: white;
        border: none;
        padding: 12px 25px;
        font-size: 16px;
        border-radius: 30px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
      }
      button:hover {
        background-color: #eb5e41;
      }
      #daftarPesan {
        margin-top: 30px;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }
      .message {
        background: white;
        padding: 15px 20px;
        margin-bottom: 15px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-size: 15px;
      }
      .sender {
        font-weight: bold;
        margin-bottom: 5px;
        color: #ff7e5f;
      }
    </style>
  </head>
  <body>
    <h2>ðŸ’Œ Kirim Pesan Anonim</h2>

    <input type="text" id="nama" placeholder="Nama" />
    <textarea id="pesan" placeholder="Tulis pesanmu di sini..."></textarea>
    <button onclick="kirimPesan()">Kirim</button>

    <h3>ðŸ“¬ Pesan Masuk:</h3>
    <div id="daftarPesan"></div>

    <script>
      // GANTI dengan Firebase konfigurasi kamu
      const firebaseConfig = {
        apiKey: "API_KEY_KAMU",
        authDomain: "PROJEK.firebaseapp.com",
        projectId: "PROJEK",
        storageBucket: "PROJEK.appspot.com",
        messagingSenderId: "123456789",
        appId: "APP_ID_KAMU",
      };

      // Inisialisasi Firebase
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();

      // Fungsi Kirim Pesan
      function kirimPesan() {
        const nama = document.getElementById("nama").value.trim() || "Anonim";
        const pesan = document.getElementById("pesan").value.trim();

        if (pesan === "") {
          alert("Pesan tidak boleh kosong!");
          return;
        }

        db.collection("pesanAnonim")
          .add({
            nama: nama,
            isi: pesan,
            waktu: firebase.firestore.FieldValue.serverTimestamp(),
          })
          .then(() => {
            document.getElementById("nama").value = "";
            document.getElementById("pesan").value = "";
          })
          .catch((error) => {
            console.error("Gagal mengirim pesan:", error);
          });
      }

      // Menampilkan Pesan
      db.collection("pesanAnonim")
        .orderBy("waktu", "desc")
        .onSnapshot((snapshot) => {
          const daftar = document.getElementById("daftarPesan");
          daftar.innerHTML = "";
          snapshot.forEach((doc) => {
            const data = doc.data();
            const el = document.createElement("div");
            el.className = "message";

            el.innerHTML = `
          <div class="sender">${data.nama || "Anonim"}:</div>
          <div>${data.isi || "(pesan kosong)"}</div>
        `;
            daftar.appendChild(el);
          });
        });
    </script>
  </body>
</html>
